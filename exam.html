<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Online Exam - Student</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #7F00FF, #E100FF);
      color: #333;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header, footer {
      background: rgba(255, 255, 255, 0.9);
      text-align: center;
      padding: 15px;
      font-weight: bold;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    main {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 30px;
    }
    .card {
      background: #fff;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
      width: 800px;
      text-align: center;
    }
    select, button {
      padding: 12px;
      margin: 15px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 1rem;
    }
    button {
      background: #2575fc;
      color: white;
      border: none;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background: #6a11cb;
    }
    .hidden { display: none; }
    .loading {
      font-size: 1.3rem;
      font-weight: bold;
      margin-top: 20px;
    }
    .spinner {
      border: 5px solid #f3f3f3;
      border-top: 5px solid #2575fc;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }
    @keyframes spin { 100% { transform: rotate(360deg); } }
    .timer {
      font-size: 1.2rem;
      font-weight: bold;
      color: red;
      margin: 15px 0;
    }
    .question {
      text-align: left;
      margin: 20px 0;
    }
    .question p { font-weight: bold; }
    .result {
      font-size: 1.3rem;
      font-weight: bold;
      margin-top: 20px;
      color: #222;
    }
  </style>
</head>
<body>
  <header>Wellcome to ExamSphere portal - Student Exam</header>
  <main>
    <div class="card">
      <div id="topic-selection">
        <h2>Select Exam Topic</h2>
        <select id="topic">
          <option value="">--Choose a Topic--</option>
          <option value="co">Computer Organization</option>
          <option value="evs">EVS</option>
          <option value="toc">Theory of Computation</option>
          <option value="oop">OOP</option>
        </select>
        <br>
        <button onclick="startExam()">Start Exam</button>
      </div>

      <div id="loading-screen" class="hidden">
        <div class="spinner"></div>
        <div class="loading">Loading Exam...</div>
      </div>

      <div id="exam-section" class="hidden">
        <div class="timer" id="timer">Time Left: 10:00</div>
        <form id="exam-form"></form>
        <button id="submit-btn" onclick="submitExam()">Submit Exam</button>
        <div id="result" class="result"></div>
      </div>
    </div>
  </main>
  <footer>&copy; 2025 Online Exam Portal</footer>

  <script>
    const questions = {
      co: [
        { q: "What is the full form of ALU?", options: ["Arithmetic Logic Unit", "Array Logic Unit", "Application Logic Unit", "Advanced Logical Unit"], answer: 0 },
        { q: "Which memory is volatile?", options: ["ROM", "RAM", "Hard Disk", "CD"], answer: 1 },
        { q: "CPU stands for?", options: ["Central Processing Unit", "Central Program Unit", "Control Processing Unit", "Central Power Unit"], answer: 0 },
        { q: "Which is faster?", options: ["Cache", "RAM", "ROM", "Hard Disk"], answer: 0 },
        { q: "Instruction register stores?", options: ["Data", "Instruction", "Program Counter", "Address"], answer: 1 },
        { q: "Which bus connects CPU to memory?", options: ["Data Bus", "Control Bus", "Address Bus", "All of these"], answer: 3 },
        { q: "What is pipelining?", options: ["Parallel execution", "Sequential execution", "Memory type", "Register type"], answer: 0 },
        { q: "Registers are located in?", options: ["RAM", "CPU", "Cache", "ROM"], answer: 1 },
        { q: "Which is non-volatile?", options: ["RAM", "Cache", "ROM", "Registers"], answer: 2 },
        { q: "PC register stores?", options: ["Address of next instruction", "Data", "Opcode", "Result"], answer: 0 }
      ],
      evs: [
        { q: "Ozone layer is found in?", options: ["Stratosphere", "Troposphere", "Mesosphere", "Exosphere"], answer: 0 },
        { q: "Acid rain contains?", options: ["HCl", "H2SO4", "NaCl", "NH3"], answer: 1 },
        { q: "Global warming is caused by?", options: ["CO2", "O2", "N2", "He"], answer: 0 },
        { q: "Which gas is greenhouse gas?", options: ["CO2", "CH4", "N2O", "All"], answer: 3 },
        { q: "Deforestation causes?", options: ["Global warming", "Loss of habitat", "Soil erosion", "All"], answer: 3 },
        { q: "Renewable resource?", options: ["Coal", "Petrol", "Solar", "Natural gas"], answer: 2 },
        { q: "EIA stands for?", options: ["Environmental Impact Assessment", "Energy Impact Analysis", "Earth Inspection Act", "Eco Information Assessment"], answer: 0 },
        { q: "Kyoto protocol deals with?", options: ["Climate change", "Deforestation", "Ozone", "Acid rain"], answer: 0 },
        { q: "Main source of energy in ecosystem?", options: ["Sun", "Wind", "Water", "Soil"], answer: 0 },
        { q: "Noise is measured in?", options: ["Decibel", "Hertz", "Watt", "Ampere"], answer: 0 }
      ],
      toc: [
        { q: "DFA stands for?", options: ["Deterministic Finite Automata", "Definite Function Automata", "Dynamic Finite Automata", "Dual Function Automata"], answer: 0 },
        { q: "CFG stands for?", options: ["Context Free Grammar", "Central Free Grammar", "Control Flow Graph", "Code Free Graph"], answer: 0 },
        { q: "Which is not regular?", options: ["a+b+", "a*b*", "anbn", "(a+b)*"], answer: 2 },
        { q: "PDA recognizes?", options: ["Regular languages", "Context-free languages", "Context-sensitive languages", "All"], answer: 1 },
        { q: "Turing machine was invented by?", options: ["Church", "Post", "Turing", "Von Neumann"], answer: 2 },
        { q: "Which grammar type is most powerful?", options: ["Type 0", "Type 1", "Type 2", "Type 3"], answer: 0 },
        { q: "Epsilon transitions are used in?", options: ["NFA", "DFA", "Turing Machine", "PDA"], answer: 0 },
        { q: "Halting problem is?", options: ["Decidable", "Undecidable", "Regular", "Finite"], answer: 1 },
        { q: "Subset construction converts?", options: ["DFA to NFA", "NFA to DFA", "CFG to PDA", "TM to DFA"], answer: 1 },
        { q: "Which is decidable?", options: ["Halting problem", "Regular language membership", "Ambiguity of CFG", "Equivalence of CFG"], answer: 1 }
      ],
      oop: [
        { q: "OOP stands for?", options: ["Object Oriented Programming", "Object Open Programming", "Only Oriented Programming", "Open Oriented Process"], answer: 0 },
        { q: "Which supports OOP?", options: ["C", "C++", "Assembly", "COBOL"], answer: 1 },
        { q: "Which is not OOP concept?", options: ["Encapsulation", "Polymorphism", "Abstraction", "Compilation"], answer: 3 },
        { q: "Which keyword is used for inheritance in Java?", options: ["this", "super", "extends", "inherits"], answer: 2 },
        { q: "Constructor has?", options: ["Same name as class", "Different name", "Random name", "No name"], answer: 0 },
        { q: "Overloading is?", options: ["Same name diff params", "Same params diff name", "Multiple inheritance", "None"], answer: 0 },
        { q: "Which is runtime polymorphism?", options: ["Overloading", "Overriding", "Encapsulation", "Abstraction"], answer: 1 },
        { q: "Java does not support?", options: ["Encapsulation", "Polymorphism", "Multiple inheritance (classes)", "Abstraction"], answer: 2 },
        { q: "Which keyword is used for object creation?", options: ["class", "object", "new", "create"], answer: 2 },
        { q: "Destructor in Java?", options: ["delete()", "~Class()", "finalize()", "destroy()"], answer: 2 }
      ]
    };

    let timerInterval;
    let timeLeft = 600; // 10 minutes
    let submitted = false;

    function startExam() {
      const topic = document.getElementById("topic").value;
      if (!topic) { alert("Please select a topic"); return; }

      document.getElementById("topic-selection").classList.add("hidden");
      document.getElementById("loading-screen").classList.remove("hidden");

      setTimeout(() => {
        document.getElementById("loading-screen").classList.add("hidden");
        document.getElementById("exam-section").classList.remove("hidden");
        loadQuestions(topic);
        startTimer();
      }, 2000);
    }

    function loadQuestions(topic) {
      const form = document.getElementById("exam-form");
      form.innerHTML = "";
      questions[topic].forEach((q, index) => {
        const div = document.createElement("div");
        div.classList.add("question");
        div.innerHTML = `<p>Q${index+1}. ${q.q}</p>` +
          q.options.map((opt, i) => 
            `<label><input type="radio" name="q${index}" value="${i}"> ${opt}</label><br>`).join("");
        form.appendChild(div);
      });
    }

    function startTimer() {
      timerInterval = setInterval(() => {
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          submitExam();
        }
        let minutes = Math.floor(timeLeft / 60);
        let seconds = timeLeft % 60;
        document.getElementById("timer").textContent = `Time Left: ${minutes}:${seconds<10?"0":""}${seconds}`;
        timeLeft--;
      }, 1000);
    }

    function submitExam() {
      if (submitted) return; // prevent double submit
      submitted = true;

      clearInterval(timerInterval);
      let score = 0, attempted = 0;

      const topic = document.getElementById("topic").value;
      questions[topic].forEach((q, i) => {
        const ans = document.querySelector(`input[name="q${i}"]:checked`);
        if (ans) {
          attempted++;
          if (parseInt(ans.value) === q.answer) score++;
        }
      });

      let unattempted = 10 - attempted;
      const emoji = score >= 7 ? "üòä" : (score >= 4 ? "üòê" : "üò¢");

      document.getElementById("result").innerHTML =
        `Your Score: ${score}/10 ${emoji}<br>` +
        `Attempted: ${attempted} | Unattempted: ${unattempted}`;

      // disable all options
      document.querySelectorAll("input[type=radio]").forEach(inp => inp.disabled = true);
      document.getElementById("submit-btn").disabled = true;
    }
  </script>
</body>
</html>
